<!-- NEURAL DOCUMENT VIEWER MACROS -->
<!-- Cyberpunk-styled macros for rendering structured JSON documents -->

{% macro render_content_block(block) %}
    {% if block.type == "heading" %}
        {{ render_heading(block) }}
    {% elif block.type == "paragraph" %}
        {{ render_paragraph(block) }}
    {% elif block.type == "div" %}
        {{ render_div(block) }}
    {% elif block.type == "quote" %}
        {{ render_quote(block) }}
    {% elif block.type == "raw_html" %}
        {{ render_raw_html(block) }}
    {% elif block.type == "structural" %}
        {{ render_structural(block) }}
    {% else %}
        <div class="alert alert-secondary mb-3">
            <strong>UNKNOWN BLOCK TYPE:</strong> {{ block.type }}
        </div>
    {% endif %}
{% endmacro %}

{% macro render_heading(heading) %}
    {% set heading_tag = "h" ~ (heading.level + 2) %}
    {% set heading_class = "text-primary" if heading.level == 1 else "text-accent" if heading.level == 2 else "text-success" %}
    
    <{{ heading_tag }} class="{{ heading_class }} mb-3 mt-4">
        {% for content in heading.content %}
            {{ render_inline_content(content) }}
        {% endfor %}
    </{{ heading_tag }}>
{% endmacro %}

{% macro render_paragraph(paragraph) %}
    <div class="paragraph-block mb-3 p-3">
        {% if paragraph.semantic_label %}
            <span class="badge mb-2">{{ paragraph.semantic_label|upper }}</span>
        {% endif %}
        <p class="mb-0">
            {% for content in paragraph.content %}
                {{ render_inline_content(content) }}
            {% endfor %}
        </p>
    </div>
{% endmacro %}

{% macro render_div(div) %}
    <div class="div-block mb-4 p-3">
        <div class="mb-2">
            <span class="badge badge-primary">CONTAINER BLOCK</span>
        </div>
        {% for content in div.content %}
            {{ render_content_block(content) }}
        {% endfor %}
    </div>
{% endmacro %}

{% macro render_quote(quote) %}
    <blockquote class="quote-block mb-4 p-4">
        <div class="mb-2">
            <span class="badge">QUOTE</span>
        </div>
        {% for content in quote.content %}
            {{ render_content_block(content) }}
        {% endfor %}
    </blockquote>
{% endmacro %}

{% macro render_raw_html(html) %}
    <div class="raw-html-block mb-3 p-3">
        <div class="mb-2">
            <span class="badge">RAW HTML</span>
        </div>
        <div class="html-content">
            {{ html.content|safe }}
        </div>
    </div>
{% endmacro %}

{% macro render_structural(structural) %}
    <div class="structural-block mb-3 p-2 text-center">
        <span class="badge">{{ structural.element_type|upper }}</span>
        {% if structural.element_type == "HorizontalRule" %}
            <hr>
        {% elif structural.element_type == "Image" %}
            <div class="text-primary">ðŸ“· IMAGE PLACEHOLDER</div>
        {% elif structural.element_type == "Link" %}
            <div class="text-accent">ðŸ”— LINK ELEMENT</div>
        {% elif structural.element_type == "Table" %}
            <div class="text-success">ðŸ“Š TABLE ELEMENT</div>
        {% else %}
            <div class="text-secondary">{{ structural.element_type }} ELEMENT</div>
        {% endif %}
    </div>
{% endmacro %}

{% macro render_inline_content(content) %}
    {% if content.type == "text" %}
        {{ content.content }}
    {% elif content.type == "emphasis" %}
        <em class="text-accent">{{ content.content }}</em>
    {% elif content.type == "structural" %}
        <span class="inline-structural badge">{{ content.element_type|upper }}</span>
    {% elif content.type == "raw_html" %}
        {{ content.content|safe }}
    {% else %}
        <span class="text-secondary">[{{ content.type|upper }}]</span>
    {% endif %}
{% endmacro %} 